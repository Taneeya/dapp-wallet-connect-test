{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/lijiewang/codes/A-gmjk/dapp-wallet-connect-test/app/components/dappFunc.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport {\n  WagmiProvider,\n  createConfig,\n  useConnection,\n  useConnections,\n  useConnect,\n  useConnectors,\n  useDisconnect,\n} from \"wagmi\";\nimport { mainnet } from \"viem/chains\";\nimport { http } from \"viem\";\nimport { injected, walletConnect } from \"wagmi/connectors\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\n\nconst chains = [mainnet] as const;\n\nconst config = createConfig({\n  chains,\n  connectors: [\n    injected(),\n    walletConnect({\n      projectId: process.env.NEXT_PUBLIC_WC_PROJECT_ID ?? \"\",\n      qrModalOptions: {\n        themeMode: \"dark\",\n      },\n    }),\n  ],\n  transports: {\n    [mainnet.id]: http(),\n  },\n});\n\nconst queryClient = new QueryClient();\n\nfunction Inner() {\n  const { address, isConnected, connector: activeConnector } = useConnection();\n  const { error, status, variables } = useConnect();\n  const connectors = useConnectors();\n  const connect = useConnect();\n  const { disconnect } = useDisconnect();\n  const [output, setOutput] = useState<string | null>(null);\n\n  const getProvider = async (): Promise<any> => {\n    return (activeConnector as any)?.getProvider?.() ?? null;\n  };\n\n  const request = async (method: string, params?: any[]) => {\n    setOutput(\"pending...\");\n    try {\n      const provider = await getProvider();\n      if (!provider?.request) throw new Error(\"No provider available\");\n      const res = await provider.request({ method, params: params ?? [] });\n      setOutput(JSON.stringify(res, null, 2));\n    } catch (err: any) {\n      setOutput(String(err?.message ?? err));\n    }\n  };\n\n  const sendETH = async () => {\n    if (!address) return setOutput(\"Not connected\");\n    // example: send 0.001 ETH to same address (wallet may ask for approval)\n    const tx = {\n      from: address,\n      to: address,\n      value: \"0x3635C9ADC5DEA0000\", // 0.1 ETH (hex) — change as needed\n    };\n    await request(\"eth_sendTransaction\", [tx]);\n  };\n\n  const switchEthereumChain = async () => {\n    await request(\"wallet_switchEthereumChain\", [{ chainId: \"0x1\" }]); // switch to mainnet\n  };\n\n  const addEthereumChain = async () => {\n    const chain = {\n      chainId: \"0x89\", // polygon\n      chainName: \"Polygon Mainnet\",\n      nativeCurrency: { name: \"MATIC\", symbol: \"MATIC\", decimals: 18 },\n      rpcUrls: [\"https://rpc.ankr.com/polygon\"],\n      blockExplorerUrls: [\"https://polygonscan.com\"],\n    };\n    await request(\"wallet_addEthereumChain\", [chain]);\n  };\n\n  const personalSign = async () => {\n    if (!address) return setOutput(\"Not connected\");\n    const message = \"Hello from dApp (personal_sign)\";\n    await request(\"personal_sign\", [message, address]);\n  };\n\n  const ethSign = async () => {\n    if (!address) return setOutput(\"Not connected\");\n    const message = \"Hello from dApp (eth_sign)\";\n    await request(\"eth_sign\", [address, message]);\n  };\n\n  const signTypedDataV1 = async () => {\n    if (!address) return setOutput(\"Not connected\");\n    const data = [\n      { type: \"string\", name: \"Message\", value: \"Hello Typed Data v1\" },\n    ];\n    setOutput(\"pending...\");\n    try {\n      const provider = await getProvider();\n      if (!provider?.request) throw new Error(\"No provider available\");\n\n      const tryCall = async (method: string, params: any[]) => {\n        return provider.request({ method, params });\n      };\n\n      // try [address, data]\n      try {\n        const res = await tryCall(\"eth_signTypedData\", [address, data]);\n        return setOutput(JSON.stringify(res, null, 2));\n      } catch (err1: any) {\n        // try [data, address]\n        try {\n          const res = await tryCall(\"eth_signTypedData\", [data, address]);\n          return setOutput(JSON.stringify(res, null, 2));\n        } catch (err2: any) {\n          // try explicit v1\n          try {\n            const res = await tryCall(\"eth_signTypedData_v1\", [address, data]);\n            return setOutput(JSON.stringify(res, null, 2));\n          } catch (err3: any) {\n            return setOutput(String(err3?.message ?? err3));\n          }\n        }\n      }\n    } catch (err: any) {\n      setOutput(String(err?.message ?? err));\n    }\n  };\n\n  const signTypedDataV3 = async () => {\n    if (!address) return setOutput(\"Not connected\");\n    const typedData = {\n      domain: { name: \"Example\" },\n      message: { contents: \"Hello Typed Data v3\" },\n      primaryType: \"Message\",\n      types: {\n        EIP712Domain: [{ name: \"name\", type: \"string\" }],\n        Message: [{ name: \"contents\", type: \"string\" }],\n      },\n    };\n    await request(\"eth_signTypedData_v3\", [address, JSON.stringify(typedData)]);\n  };\n\n  const signTypedDataV4 = async () => {\n    if (!address) return setOutput(\"Not connected\");\n    const typedData = {\n      domain: { name: \"Example\" },\n      message: { contents: \"Hello Typed Data v4\" },\n      primaryType: \"Message\",\n      types: {\n        EIP712Domain: [{ name: \"name\", type: \"string\" }],\n        Message: [{ name: \"contents\", type: \"string\" }],\n      },\n    };\n    await request(\"eth_signTypedData_v4\", [address, JSON.stringify(typedData)]);\n  };\n\n  return (\n    <div className=\"flex flex-col gap-3\">\n      <div className=\"flex items-center gap-3\">\n        {!isConnected ? (\n          <>\n            {connectors.map((connector) => (\n              <button\n                key={connector.id}\n                onClick={() => connector.connect()}\n                className=\"rounded-md bg-black text-white px-3 py-2 text-sm\"\n              >\n                Connect {connector.name}\n                {status === \"pending\" &&\n                (variables?.connector as any)?.id === connector.id\n                  ? \"…\"\n                  : \"\"}\n              </button>\n            ))}\n            {error && (\n              <div className=\"text-sm text-red-500\">{error.message}</div>\n            )}\n          </>\n        ) : (\n          <>\n            <div className=\"text-sm\">Connected: {address}</div>\n            <button\n              onClick={() => disconnect()}\n              className=\"rounded-md border px-3 py-2 text-sm\"\n            >\n              Disconnect\n            </button>\n          </>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-2\">\n        <button\n          onClick={sendETH}\n          className=\"rounded-md border px-3 py-2 text-sm\"\n        >\n          Send ETH\n        </button>\n        <button\n          onClick={switchEthereumChain}\n          className=\"rounded-md border px-3 py-2 text-sm\"\n        >\n          Switch Chain\n        </button>\n        <button\n          onClick={addEthereumChain}\n          className=\"rounded-md border px-3 py-2 text-sm\"\n        >\n          Add Chain\n        </button>\n        <button\n          onClick={personalSign}\n          className=\"rounded-md border px-3 py-2 text-sm\"\n        >\n          personal_sign\n        </button>\n        <button\n          onClick={ethSign}\n          className=\"rounded-md border px-3 py-2 text-sm\"\n        >\n          eth_sign\n        </button>\n        <button\n          onClick={signTypedDataV1}\n          className=\"rounded-md border px-3 py-2 text-sm\"\n        >\n          signTypedData (v1)\n        </button>\n        <button\n          onClick={signTypedDataV3}\n          className=\"rounded-md border px-3 py-2 text-sm\"\n        >\n          signTypedData_v3\n        </button>\n        <button\n          onClick={signTypedDataV4}\n          className=\"rounded-md border px-3 py-2 text-sm\"\n        >\n          signTypedData_v4\n        </button>\n      </div>\n\n      <div className=\"mt-2\">\n        <div className=\"text-sm font-medium\">Result</div>\n        <pre className=\"text-xs bg-gray-100 p-2 rounded\">{output ?? \"—\"}</pre>\n      </div>\n    </div>\n  );\n}\n\nexport default function DappFunc() {\n  const [mounted, setMounted] = useState(false);\n  useEffect(() => setMounted(true), []);\n  if (!mounted) return null;\n\n  return (\n    <WagmiProvider config={config}>\n      <QueryClientProvider client={queryClient}>\n        <Inner />\n      </QueryClientProvider>\n    </WagmiProvider>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 462, "column": 0}, "map": {"version":3,"sources":["file:///Users/lijiewang/codes/A-gmjk/dapp-wallet-connect-test/app/page.tsx"],"sourcesContent":["\"use client\";\nimport DappFunc from \"./components/dappFunc\";\n// import WalletConnectModal from \"./components/walletConnect\";\n\nexport default function Home() {\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-zinc-50 font-sans dark:bg-black\">\n      <main className=\"flex min-h-screen w-full max-w-3xl flex-col items-center justify-between py-32 px-16 bg-white dark:bg-black sm:items-start\">\n        <div className=\"text-lg font-semibold\">Dapp-test</div>\n        <div className=\"wallet-connect flex gap-2\">\n          <DappFunc />\n        </div>\n        <div>{/* <WalletConnectModal /> */}</div>\n        {/* <div className=\"flex flex-col gap-4 text-base font-medium sm:flex-row\">\n          <Link\n            href=\"/detail\"\n            className=\"flex h-12 w-full items-center justify-center gap-2 rounded-full bg-foreground px-5 text-background transition-colors hover:bg-[#383838] dark:hover:bg-[#ccc] md:w-[158px]\"\n          >\n            Detail test\n          </Link>\n        </div> */}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAIe,SAAS;IACtB,qBACE,+VAAC;QAAI,WAAU;kBACb,cAAA,+VAAC;YAAK,WAAU;;8BACd,+VAAC;oBAAI,WAAU;8BAAwB;;;;;;8BACvC,+VAAC;oBAAI,WAAU;8BACb,cAAA,+VAAC,4IAAQ;;;;;;;;;;8BAEX,+VAAC;;;;;;;;;;;;;;;;AAYT;KApBwB"}}]
}